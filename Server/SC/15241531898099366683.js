// { "framework": "Vue" }

!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=256)}({0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(15),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},1:function(e,t,n){"use strict";Promise.prototype.handle=function(){var e=["0000","0001","0002","0003","0004","1001"],t={"0000":"成功","0001":"网络错误","0002":"下载失败","0003":"文件删除失败","0004":"文件存储失败",1001:"扫描超时","01":"缺少必填参数","02":"参数格式不正确","03":"找不到对应的值","04":"未知错误","05":"返回数据为空或解析错误"};return this.catch(function(n){if(-1!=Object.prototype.toString.call(n).indexOf("Error"))throw n.message;if(n&&n.code){var r=n.code;throw r=-1!=e.indexOf(r)?r:r.substr(2),t[r]||n.data||t["04"]}throw n})},Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})}},10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=weex.requireModule("jfLoadingModule");t.default={show:function(){r.show()},hide:function(){r.dismiss()}}},105:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),u=r(o),a=n(62),i=r(a),c=n(308),f=r(c),s=n(4),d=r(s),l=n(3),h=r(l),p=n(38),m=r(p),g=n(35),_=r(g),y=n(59),b=r(y),v=n(16),P=r(v),O=n(12),w=r(O),j=n(0),M=r(j),T=n(87),k=r(T),C=n(53),A=r(C),E=n(11),I=r(E),S=n(18),D=r(S);t.default={data:function(){return{menu_arr:[{txt:"商城",src:"jfb_main",img_src:(0,i.default)("jfb-menu-store1.png"),img_checked_src:(0,i.default)("jfb-menu-store-active1.png"),checked:!0},{txt:"店铺",src:"jfb_store",img_src:(0,u.default)("jfb-menu-sfk-icon.png"),img_checked_src:(0,u.default)("jfb-menu-sfk-active-icon.png"),checked:!1},{txt:"我的",src:"jfb_mine",img_src:(0,u.default)("jfb_mine_icon.png"),img_checked_src:(0,u.default)("jfb_mine_checked_icon.png"),checked:!1}],type:!1,auth:{},avatar:""}},created:function(){var e=this;this.checkGesture(),b.default.add("$$SWITCH_MENU",function(t){var n=t.index,r=t.is_act;e.handleSwitch(n),r&&e.alertPop(r)}),b.default.add("$$REFRESH_APP",function(t){I.default.root(),e.fetchPageUrl(),e.handleSwitch(0),e.setGesture()}),this.fetchAppTip(),this.fetchPageUrl()},methods:{handleNull:function(){},fetchPageUrl:function(){var e=this;this.menu_arr.forEach(function(t){!function(t){if(!t.src)return"";f.default.page(t.src).then(function(n){e.$set(t,"url",n)}).catch(function(e){d.default.toast({message:e})})}(t)})},alertPop:function(e){var t="";"168"===e&&(t="您自"+A.default.date("yyyy.MM.dd")+"至"+A.default.getDateStr(89)+"期间享受0.46％的刷卡费率及3元/笔的立即到账手续费",d.default.alert({message:t,okTitle:"我知道了"},function(e){}))},handleViewAppear:function(){this.fetchAvatar(),h.default.getToken().then(function(e){m.default.queryMerchantNumber(e.mobileNo),m.default.queryUserInfo()})},handleSwitch:function(e){var t=this;if(1!==e)return void this.menu_arr.forEach(function(t,n){t.checked=n===e});D.default.show(),this.type||(this.type=!0,h.default.getToken().then(function(e){var t={method:"POST",body:{payPhone:e.mobileNo},https:!0};return(0,P.default)("DianShuaUserBindCardInfo.Req",t)}).then(function(n){if("0000"!==n.respCode)return d.default.toast({message:n.respDesc});switch(n.data&&"0"!==n.data.respCode&&D.default.hide(),n.data.respCode){case"0":t.menu_arr.forEach(function(t,n){t.checked=n===e}),t.type=!1;break;case"1":d.default.confirm({message:n.data.respDesc,okTitle:"去认证",cancelTitle:"取消"},function(e){"去认证"===e&&m.default.authenRealName(),t.type=!1});break;case"2":d.default.confirm({message:n.data.respDesc,okTitle:"立即绑卡",cancelTitle:"取消"},function(e){"立即绑卡"===e&&I.default.push("jfb_drawing_account_add"),t.type=!1});break;case"3":d.default.toast({message:n.data.respDesc});break;case"5":d.default.confirm({message:n.data.respDesc,okTitle:"立即绑定",cancelTitle:"取消"},function(e){"立即绑定"===e&&I.default.push("jfb_sntrade"),t.type=!1});break;case"6":d.default.confirm({message:n.data.respDesc,okTitle:"立即验证",cancelTitle:"取消"},function(e){"立即验证"===e&&t.toAuthCreditCard(),t.type=!1});break;default:d.default.toast({message:n.data.respDesc}),t.type=!1}}).catch(function(){m.default.showLogin(),t.type=!1}).finally(function(){D.default.hide()}))},checkGesture:function(){m.default.checkToken().then(function(e){_.default.check(e.mobileNo).then(function(e){if("03"===e.type)throw Error("")}).catch(function(){m.default.showLogin()})})},setGesture:function(){h.default.getToken().then(function(e){return _.default.set(e.mobileNo)}).then(function(){}).catch(function(e){})},fetchAvatar:function(){var e=this;h.default.getToken().then(function(t){(0,P.default)("GetUserMugshot.Req",{method:"POST",https:!0}).then(function(t){e.avatar="0000"===t.respCode?"data:image/png;base64,"+decodeURIComponent(t.picData):""}).catch(function(t){e.avatar=""}).finally(function(){e.saveAvatar(t.mobileNo)})}).catch(function(){e.avatar=""})},saveAvatar:function(e){var t=this.avatar.substr(22);t?(h.default.cache.set("avatar",this.avatar),_.default.setImage(t)):(h.default.cache.set("avatar",""),_.default.setImage("")),k.default.set({mobileNo:e,avatar:this.avatar})},fetchAppTip:function(){var e={method:"POST",https:!0};(0,P.default)("getAppTip.Req",e).then(function(e){if("0000"===e.respCode){var t=M.default.keyBy(e.data,"tipType");w.default.set("APPTIPINFO",t)}}).catch(function(e){})}},destroyed:function(){b.default.remove("$$SWITCH_MENU"),b.default.remove("$$REFRESH_APP")}}},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(14),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(20),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(19),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},14:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),u=r(o),a=n(10),i=r(a),c=n(8),f=r(c),s=n(9),d=r(s),l=n(0),h=r(l),p=weex.requireModule("navigator"),m=weex.requireModule("pageManagerModule"),g=weex.requireModule("externalAppModule"),_=new d.default(1e3);t.default={push:function(e,t){if(!_.do(e+JSON.stringify(t)))return null;i.default.show();var n=h.default.isObject(e)?e.url:e,r=h.default.isObject(e)?e.animated:"true",o=h.default.isObject(e)?e.close:"";u.default.page(n).then(function(e){e=t?e+"?parmas="+encodeURIComponent(JSON.stringify(t)):e,p.push({url:e,animated:r,close:o},function(e){})}).catch(function(e){f.default.toast({message:e})}).finally(function(){i.default.hide()})},pop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"true";p.pop({animated:e},function(e){})},root:function(){m.popToRootPage(function(e){})},getParmas:function(e){var t=e.$getConfig().bundleUrl,n=t.indexOf("?parmas=")>-1?t.substr(t.indexOf("?parmas=")+8):"";return n?JSON.parse(decodeURIComponent(decodeURIComponent(n))):""},back:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m.popWithParam({popBack:e+"",popFront:t+""},function(e){})},del:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m.deletePageWithParam({popBack:e+"",popFront:t+""},function(e){})},external:function(e){g.open(e)}}},15:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default={fill:function(e){return u(e)},keys:function(e){return a(e)},keyBy:function(e,t){return s(e,t)},catKeys:function(e,t){return d(e,t)},catArrayKey:function(e,t){return l(e,t)},defaults:function(e,t){return h(e,t)},isEmpty:function(e){return i(e)},getType:function(e){return c(e)},checkType:function(e,t){return f(e,t)},isString:function(e){return f(e,"string")},isBoolean:function(e){return f(e,"boolean")},isArray:function(e){return f(e,"array")},isNumber:function(e){return f(e,"number")},isFunction:function(e){return f(e,"function")},isObject:function(e){return f(e,"object")},isError:function(e){return f(e,"error")}};var u=function(e){return Array.apply(null,Array(e))},a=function(e){var t=[];if("object"===c(e)&&!i(e))for(var n in e)t.push(n);return t},i=function(e){if(f(e,"string")||f(e,"array"))return 0===e.length;if(f(e,"object"))for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},c=function(e){return Object.prototype.toString.call(e).toLowerCase().match(/\s\w+/)[0].trim()},f=function(e,t){return c(e)===t.toLowerCase()},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f(e,"array"))return e.forEach(function(e){n=o({},n,r({},e[t],e))}),n},d=function(e,t){var n={};return f(e,"object")&&f(t,"array")&&t.forEach(function(t){n[t]=e[t]}),n},l=function(e,t){var n=[];return f(e,"array")&&f(t,"string")&&e.forEach(function(e){e[t]&&-1==n.indexOf(e[t])&&n.push(e[t])}),n},h=function(e,t){return d(e,a(t))}},16:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){t=t||{},this.method=t.method||"GET",this.body=t.body||{},this.type=t.type||!1;var n={appUser:"ds_mpos",signkey:"36f9c59d46ad450f84c47f81e10b429c"};return this.body=Object.assign(this.body,n),this.headers=t.headers||{},this.api=e,this.https=t.https||!1,this["_gw"==this.https?"_gw":this.https?"_https":"_fetch"]()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t.loading&&l.default.show(),new o(e,t).finally(function(){t.loading&&l.default.hide()})};var u=n(2),a=r(u),i=n(3),c=r(i),f=n(17),s=r(f),d=n(18),l=r(d),h=n(13),p=r(h),m=n(4),g=r(m),_=weex.requireModule("stream"),y=weex.requireModule("jfHttpsModule");o.prototype._gw=function(){var e=this;return new Promise(function(t,n){c.default.getToken().then(function(r){var o=e.method.toLocaleUpperCase(),u={headers:{"Content-Type":"application/json"},method:o,url:a.default.GW_API_URL+e.api,type:"json",timeout:6e4,body:JSON.stringify(e.body)};console.log("请求的地址：",a.default.GW_API_URL+e.api),console.log("请求的总参数：",u),console.log("请求的参数：",e.body),_.fetch(u,function(e){console.log("后台返回的总数据：",e),e.data?t(e.data):n("获取sign失败")})}).catch(function(){p.default.show("login")})})},o.prototype._https=function(){var e=this,t=this,n=this.method.toLocaleLowerCase(),r=a.default.API_URL+this.api;return this.body.mobileNo=this.body.mobileNo||"",this.body.token=this.body.token||"",this.body.version="3.7.4",console.log(t.api+"_接口URL地址：",r),new Promise(function(o,u){c.default.getToken().then(function(n){e.body.mobileNo||(console.log(t.api+"_请求的用户手机号码：",n.mobileNo),e.body.mobileNo=n.encryptMobileNo),e.body.token=n.token}).finally(function(){console.log(t.api+"_接口URL参数：",e.body),y[n](r,e.body,function(e){if(console.log(t.api+"_接口返回的数据：",e),"0000"!==e.code)return u("请求失败");try{"PE15"===e.data.respCode?(u(e.data.respDesc),c.default.logout().finally(function(){return p.default.show("jfb_login")})):o(e.data)}catch(e){u(e)}})})})},o.prototype._fetch=function(){var e=this;return c.default.getToken().then(function(t){return e.body.token=t.token,e.body.version="3.7.4",e.body.mobileNo||(e.body.mobileNo=t.encryptMobileNo),console.log("request.js-1——用户信息：",t),s.default.getUUID(t.mobileNo)}).then(function(t){return e.body.uuid=t,delete e.body.appUser,e.body.app_user="ds_mpos",console.log("request.js-2——UUID：",t),console.log("request.js-3——加密前的参数：",e.body),s.default.md5({req:JSON.stringify(e.body)})}).then(function(t){console.log("request.js-4——MD5：",t);var n=e.method.toLocaleUpperCase(),r=e.type?a.default.API_STORE+e.api:a.default.API_NEXTPAY+e.api;console.log("request.js-5——请求URL：",r);var o={headers:{"Content-Type":"application/x-www-form-urlencoded"},method:n,url:r,type:"text",timeout:6e4};return"GET"==n?o.url=o.url+"?req="+t.req+"&sign="+t.sign+"&ts="+t.ts:"POST"==n&&(o.body="req="+t.req+"&sign="+t.sign+"&ts="+t.ts),new Promise(function(e,t){console.log("request.js-6——发起请求："),console.log("request.js-7——请求参数：",o),_.fetch(o,function(n){if(console.log("request.js-8——请求返回结果：",n),console.log("request.js-8——请求解析结果：",decodeURIComponent(n.data)),200!==n.status)return g.default.toast({message:"服务器异常，请稍后再试"}),t();try{var r=decodeURIComponent(n.data),o=r.indexOf("{"),u=r.lastIndexOf("}");r=r.substr(o,u-o+1);var a=JSON.parse(r);"0001"===a.code||"0002"===a.code?(t(a.msg),c.default.logout().finally(function(){return p.default.show("jfb_login")})):e(a)}catch(e){t(e)}})})})}},17:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if("object"===g.default.getType(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function u(e){var t=e;try{t=-1!==e.indexOf("jfzf")?t.replace(/jfzf/g,"h5pay.html?ur=jfzf"):t.replace(/weixin/g,"h5pay.html?ur=weixin")}catch(e){}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(27),c=r(i),f=n(3),s=r(f),d=n(2),l=r(d),h=n(4),p=r(h),m=n(0),g=r(m),_=weex.requireModule("jfServiceModule"),y=weex.requireModule("openPayModule");t.default={md5:function(e){return new Promise(function(t,n){_.md5(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},getUUID:function(e){return new Promise(function(t,n){_.getUUID(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},getParameter:function(){return new Promise(function(e,t){_.getParameter(function(n){"0000"===n.code?e(n.data):t(n)})}).handle()},pay:function(e){return new Promise(function(t,n){c.default.get().then(function(r){e.orgCode||(e.orgCode=l.default.ORG_CODE,e.orgId=l.default.ORG_CODE);var i=a({amount:"",merchantOrderId:"",goodsDesc:"",merchantCode:"123456",merchantName:"",merchantMessage:"",mobileNo:"",fromMobileNo:"",city:r.province+"|"+r.city+"|"+r.subLocality,payType:"0,1,2",latitude:r.latitude,longitude:r.longitude,reOrPayFlag:"0"},e);console.log("调用支付参数",i),v().then(function(){y.pay(i,function(e){if("0000"!==e.code)return n(e);var r=o(e.data);if("0001"===r.code)return n({code:"ds_system",msg:"网络异常"});if("0002"===r.code)return n({code:"ds_system",msg:"交易取消"});var a=o(r.result),i=o(a.mate),c=o(a.result);if("0000"!==i.code)return n(i);var f="";"0"==r.type&&(f=u(c.codeImgUrl)),t({type:r.type,msg:i.msg,link:f})})})}).catch(function(e){n({msg:e,code:"LOCATION"})})})},pay1:function(e){return c.default.get().then(function(t){return new Promise(function(n,r){e.orgCode||(e.orgCode=l.default.ORG_CODE,e.orgId=l.default.ORG_CODE);var i=a({amount:"",merchantOrderId:"",goodsDesc:"",merchantCode:"",fromMerchantCode:"",merchantName:"",merchantMessage:"",mobileNo:"",fromMobileNo:"",city:t.province+"|"+t.city+"|"+t.subLocality,payType:"0,1,2",latitude:t.latitude,longitude:t.longitude,reOrPayFlag:"0"},e);console.log("调用支付参数",i),v().then(function(){y.pay(i,function(e){if("0000"!==e.code)return r(e);var t=o(e.data);if("0001"===t.code)return r({code:"ds_system",msg:"网络异常"});if("0002"===t.code)return r({code:"ds_system",msg:"交易取消"});var a=o(t.result),i=o(a.mate),c=o(a.result);if("0000"!==i.code)return r(i);var f="";"0"==t.type&&(f=u(c.codeImgUrl)),n({type:t.type,msg:i.msg,link:f})})})})}).catch(function(e){return p.default.alert({message:e+"",okTitle:"知道了"})})},query:function(){return new Promise(function(e,t){s.default.getToken().then(function(n){v().then(function(){y.queryBalance({mobileNo:n.encryptMobileNo,merchantCode:n.payCustomerId,orgCode:l.default.ORG_CODE,orgId:l.default.ORG_CODE},function(n){if("0000"!==n.code)return t(n);var r=o(n.data);if("0001"===r.code)return t({code:"ds_system",msg:"网络异常"});var u=o(r.result),a=o(u.mate),i=o(u.result),c=o(i.message);if("0000"!==a.code)return t(a);e(c)})}).catch(function(e){t("环境设置失败！")})}).catch(function(e){t()})}).handle()},encryptPassword:function(e,t){return new Promise(function(n,r){_.encryptPwd(e,t,function(e){"0000"===e.code?n(e.data):r(e)})}).handle()},drawMoney:function(e){return new Promise(function(t,n){s.default.getToken().then(function(r){v().then(function(){y.drawMoney({mobileNo:r.encryptMobileNo,merchantCode:r.payCustomerId,amount:e,secondToFlag:"T0",orgCode:l.default.ORG_CODE,orgId:l.default.ORG_CODE},function(e){if(console.log(e),"0000"!=e.code)return n(e);if("0001"===e.data.code)return n({code:"ds_system",msg:"网络异常"});var r=e.data.result.mate;if("0000"!==r.code)return n(r.msg);t(r)})}).catch(function(e){n("环境设置失败！")})}).catch(function(e){n()})}).handle()}};var b=!1,v=function(){return new Promise(function(e,t){if(b)return e();y.setOpenPayUrl(l.default.OPEN_PAY,l.default.OPEN_PAY_UPLOAD,function(n){if("0000"!=n.code)return t();b=!0,e()})})}},170:function(e,t){e.exports={"app-wrap":{flex:1},"app-inner":{position:"absolute",top:0,left:0,right:0,bottom:100},"menu-wrap":{height:100,position:"absolute",bottom:0,left:0,right:0,alignItems:"center",flexDirection:"row",borderTopWidth:1,borderColor:"#E5E5E5",backgroundColor:"#ffffff"},"menu-inner":{flex:1,height:99,alignItems:"center",flexDirection:"row"},"menu-item":{flex:1,justifyContent:"center",alignItems:"center"},"menu-item-icon":{width:48,height:48},"menu-main-item":{marginTop:0},"menu-main-item-icon":{width:104,height:104},"menu-item-txt":{fontSize:20,color:"#4A4A4A",marginTop:4},"menu-bg":{position:"absolute",left:0,right:0,bottom:0,top:0},"pop-wrap":{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.3)",justifyContent:"center",alignItems:"center"},"pop-inner":{width:624,alignItems:"center",backgroundColor:"#ffffff",height:880,borderRadius:10},"pop-banner-image":{width:624,height:480},"pop-prompt":{marginTop:32,fontSize:32,color:"#4A4A4A"},"pop-sure-btn":{marginTop:64,width:500,height:100,borderRadius:8,justifyContent:"center",alignItems:"center",backgroundImage:"linear-gradient(to right, #0076FF, #0093FF)"},"pop-sure-btn-text":{fontSize:36,color:"#FFFFFF"},"pop-sure-cancel-text":{marginTop:48,fontSize:32,color:"#008FFF"},"pop-close":{width:80,height:80,marginTop:44}}},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(10),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},19:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),u=r(o),a=n(9),i=r(a),c=weex.requireModule("transitionModule"),f=new i.default(1e3);t.default={show:function(e){return new Promise(function(t,n){if(!f.do(e))return null;u.default.page(e).then(function(e){c.present({url:e,animated:"true"},function(e){t()})})}).handle()},close:function(){return new Promise(function(e,t){c.dismiss({},function(t){e()})}).handle()}}},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GW_API_URL:"http://gw.finumi.com/open-misc/",API_URL:"https://appdl.91dbq.com/jfpay_prepo_new/",API_NEXTPAY:"http://210.22.146.219:3489/nextpay_shop/v1/",API_STORE:"http://newfd.91dbq.com/nextpay_shop/v1/",OPEN_PAY:"https://openpays.91dbq.com/",OPEN_PAY_UPLOAD:"http://openpay-file.91dbq.com:9527/",ORG_CODE:"170330165348",MACHINES_TOOL_ORG_CODE:"170904134355",MACHINES_TOOL_MERCHANT_CODE:"8508120858515018",SOURCE:"http://appimg.91dbq.com/img/jfb/image/0.0.2/"}},20:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=weex.requireModule("storage"),a=function(e,t,n){return new Promise(function(r,o){if("string"!=m(e))return o("key must be string");u.setItem(e,h(t,n),function(e){"success"===e.result?r():o("set store error")})})},i=function(e){return new Promise(function(t,n){if("string"!=m(e))return n("key must be string");u.getItem(e,function(r){"success"===r.result?t(p(r.data)):n(e+" is undefined")})})},c=function(e){return new Promise(function(t,n){if("string"!=m(e))return n("key must be string");u.getAllKeys(function(r){-1!=r.data.indexOf(e)?t():n(e+" is undefined")})})},f=function(e){return new Promise(function(t,n){if("string"!=m(e))return n("key must be string");u.removeItem(e,function(r){if("success"===r.result)return t();c(e).then(function(){return n("remove store error")}).catch(function(){return t()})})})},s=function(){return new Promise(function(e,t){u.getAllKeys(function(n){"success"===n.result?e(n.data):t(n)})})},d=function(){return s().then(function(e){var t=[];return e.forEach(function(e){return t.push(i(e).then(function(t){return r({},e,t)}))}),Promise.all(t).then(function(e){var t={};return e.forEach(function(e){t=o({},t,e)}),t})})},l=function(){return s().then(function(e){var t=[];return e.forEach(function(e){return t.push(f(e))}),Promise.all(t)})};t.default={set:a,get:i,has:c,remove:f,getAllKeys:s,getAll:d,clear:l};var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return JSON.stringify({_name_:"store",type:m(e),effect:t,lastaccess:(new Date).getTime(),storage:e})},p=function(e){try{var t=JSON.parse(e);return"store"===t._name_?t.storage:t}catch(t){return e}},m=function(e){return Object.prototype.toString.call(e).toLowerCase().match(/\s\w+/)[0].trim()}},209:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:["app-wrap"],on:{viewappear:e.handleViewAppear}},[e._l(e.menu_arr,function(e,t){return n("embed",{key:t,staticClass:["app-inner"],style:{visibility:e.checked?"visible":"hidden"},attrs:{src:e.url,type:"weex"}})}),n("div",{staticClass:["menu-wrap"]},[n("div",{staticClass:["menu-inner"]},e._l(e.menu_arr,function(t,r){return n("div",{key:r,staticClass:["menu-item"],on:{click:function(t){e.handleSwitch(r)}}},[n("image",{staticClass:["menu-item-icon"],attrs:{src:t.checked?t.img_checked_src:t.img_src}}),t.txt?n("text",{staticClass:["menu-item-txt"]},[e._v(e._s(t.txt))]):e._e()])}))])],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},256:function(e,t,n){var r,o,u=[];u.push(n(170)),r=n(105);var a=n(209);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(Object.keys(r).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o=r=r.default),"function"==typeof o&&(o=o.options),o.__file="F:\\workproject\\jfb_web\\src\\modules\\jfb\\app.vue",o.render=a.render,o.staticRenderFns=a.staticRenderFns,o._scopeId="data-v-6ec9ecef",o.style=o.style||{},u.forEach(function(e){for(var t in e)o.style[t]=e[t]}),"function"==typeof __register_static_styles__&&__register_static_styles__(o._scopeId,u),e.exports=r,e.exports.el="true",new Vue(e.exports)},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(28),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=weex.requireModule("jfLocationModule");t.default={get:function(){return new Promise(function(e,t){r.getLocation(function(n){"0000"===n.code?e(n.data):t(n)})}).handle()}}},3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(12),a=r(u),i=n(0),c=r(i),f={realName:"",mobileNo:"",encryptMobileNo:"",userType:"",certPid:"",certType:"",token:"",authenFlag:"",email:"",customerId:"",payCustomerId:"",status:"",collection_or_payment:!1,authScanRecognizeTimeoutCount:""};t.default={login:function(e){return a.default.set("DD_AUTH_STORE_DATA",c.default.defaults(e,f)).catch(function(e){throw"登录失败"})},update:function(e){return c.default.isObject(e)?a.default.get("DD_AUTH_STORE_DATA").then(function(t){return t=c.default.isObject(t)?t:{},t=Object.assign(t,e),a.default.set("DD_AUTH_STORE_DATA",t)}):Promise.reject("update input must be object")},getToken:function(){return a.default.get("DD_AUTH_STORE_DATA").catch(function(e){throw"用户未登录"})},cache:{set:function(e,t){return c.default.isString(e)?c.default.isEmpty(e)?Promise.reject("cache must has value"):a.default.get("DD_AUTH_CACHE_STORE_DATA").then(function(n){return n=c.default.isObject(n)?n:{},n[e]=t,a.default.set("DD_AUTH_CACHE_STORE_DATA",n)}).catch(function(n){return a.default.set("DD_AUTH_CACHE_STORE_DATA",o({},e,t))}):Promise.reject("cache must has key")},get:function(e){return c.default.isString(e)?a.default.get("DD_AUTH_CACHE_STORE_DATA").then(function(t){return c.default.isObject(t)&&t[e]?Promise.resolve(t[e]):Promise.reject("cache don't has"+e)}):Promise.reject("cache must has key")}},logout:function(){return Promise.all([a.default.remove("DD_AUTH_STORE_DATA"),a.default.remove("DD_AUTH_CACHE_STORE_DATA"),a.default.remove("pay_history")]).catch(function(e){throw"缓存清除失败"})}}},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(36),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(r),u=weex.requireModule("gesturePwdModule"),a=new o.default(2e3);t.default={set:function(e){return new Promise(function(t,n){if(!a.do(e))return null;u.setGesture(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},check:function(e){return new Promise(function(t,n){u.checkGesture(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},reset:function(e){return new Promise(function(t,n){u.resetGesture(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},edit:function(e){return new Promise(function(t,n){u.alterGesture(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},delete:function(e){return new Promise(function(t,n){u.deleteGesture(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()},setImage:function(e){return u.setImage(e)}}},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isPhone:function(e){return/^1\d{10}$/.test(e)},isIDCard:function(e){return/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(e)},isBankCard:function(e){return/^(\d{16}|\d{18}|\d{19})$/.test(e)},isEmail:function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},isMoney:function(e){return/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/.test(e)}}},38:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),u=r(o),a=n(3),i=r(a),c=n(11),f=r(c),s=n(35),d=r(s),l=n(13),h=r(l),p=n(12),m=r(p),g=n(0),_=r(g),y=n(39),b=r(y),v=weex.requireModule("stream");t.default={checkToken:function(){return new Promise(function(e,t){i.default.getToken().then(function(n){if(!n.mobileNo||!n.token)throw"token formal error";return(0,u.default)("CheckToken.Req",{method:"POST",https:!0}).then(function(r){return"0000"===r.respCode?e(n):t()})}).catch(function(e){t(e)})})},authenRealName:function(){i.default.getToken().then(function(e){switch(e.authenFlag){case"2":f.default.push("jfb_authenticating");break;case"3":f.default.push("jfb_authenticationOK");break;case"4":f.default.push("jfb_authenticationFailure");break;case"B":f.default.push("jfb_authenticationOK");break;case"D":f.default.push("jfb_authenticatfsz");break;default:f.default.push("jfb_certification")}})},showLogin:function(){i.default.getToken().then(function(e){return d.default.delete(e.mobileNo)}).then(function(){return i.default.logout()}).finally(function(){h.default.show("jfb_login")})},queryMerchantNumber:function(e){var t={method:"POST",body:{userPhone:e},https:!0};return new Promise(function(n,r){i.default.getToken().then(function(o){(0,u.default)("selectOtherUserInfo.Req",t).then(function(t){var u=t.respBody?JSON.parse(t.respBody):{};if("0000"!==t.respCode)return n(t);var a=u.payCustomerId;if(console.log("获取到的商户号:",a),o.mobileNo===e&&a)return void i.default.update({payCustomerId:a}).then(function(){n(t)}).catch(function(){r()});n(t)})})})},queryUserInfo:function(){var e={method:"POST",https:!0};return new Promise(function(t,n){i.default.getToken().then(function(r){(0,u.default)("UserInfoQuery2.Req",e).then(function(e){if("0000"!==e.respCode)return n(e);var r=e.data,o=r.authenFlag,u=r.certPid,a=r.realName,c=r.customerId;i.default.update({authenFlag:o,certPid:u,realName:a,customerId:c}).then(function(){t(e)}).catch(function(){n(e)})})})})},queryUserInfo2:function(){return i.default.getToken().then(function(e){var t={method:"POST",https:!0};return(0,u.default)("UserInfoQuery2.Req",t)}).then(function(e){if("0000"!==e.respCode)return Promise.reject(e);var t=e.data,n=t.authenFlag,r=t.certPid,o=t.realName,u=t.customerId;return i.default.update({authenFlag:n,certPid:r,realName:o,customerId:u})})},getTipInfo:function(){return new Promise(function(e,t){m.default.get("APPTIPINFO").then(function(t){e(t)}).catch(function(n){var r={method:"POST",https:!0};(0,u.default)("getAppTip.Req",r).then(function(t){if("0000"===t.respCode){var n=_.default.keyBy(t.data,"tipType");m.default.set("APPTIPINFO",n),e(n)}}).catch(function(e){t(e)})})})},getCity:function(){return new Promise(function(e,t){var n={headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET",url:(0,b.default)("city.json"),type:"json",timeout:1e4};v.fetch(n,function(n){if(200!==n.status)return t();e(n.data)})})}}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return o.default.IMG_SOURCE+e}},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(1);var r=n(8),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},5:function(e,t,n){"use strict";function r(e){this.timer="",this.deferred="",this.duration=e||2e3}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.prototype.do=function(e){var t=this;if(this.deferred!=e)return this.deferred=e,clearTimeout(this.timer),this.timer=setTimeout(function(){t.deferred=""},this.duration),!0}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tofixed:function(e){return((parseFloat(e)||0)/100).toFixed(2)},formateMoney:function(e){var t=parseFloat(e);if(t){e=(t/100).toFixed(2)+"";var n=e.split(".")[0].split("").reverse(),r=e.split(".")[1],o="";return n.forEach(function(e,t){o+=n[t]+((t+1)%3==0&&t+1!=n.length?",":"")}),o.split("").reverse().join("")+"."+r}return 0==e?"0.00":"---"},todate:function(e){if(e){return e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)}return"---"},dateformat:function(e){if(e){return e.substr(0,4)+"年"+e.substr(4,2)+"月"+e.substr(6,2)+"日"}return"年 月 日"},dayFormat:function(e){if(e){return e.substr(6,2)+"号"}return" 号"},nameFormatStar:function(e){if(e){return e.replace(/.(?=.)/g,"*")}},cardFormatStar:function(e){if(e){return e.replace(/(\d{0})\d+(\d{4})/,"$1 **** **** **** $2")}},cardFormatStar2:function(e){if(e){return e.replace(/(\d{4})\d+(\d{4})/,"$1 **** **** $2")}},bankcardformat:function(e){if(e){return e.substr(0,4)+" "+e.substr(4,4)+" "+e.substr(8,4)+" "+e.substr(12,4)+" "+e.substr(16,4)}return""},bankcardLastNum:function(e){if(e){return e.substr(e.length-4)}return""},hidephone:function(e){return e?e.substr(0,4)+"****"+e.substr(7,4):"---"},phoneFouth:function(e){if(e){return e.substring(0,3)+"****"+e.substring(8,11)}return""},removeSpaces:function(e){return e.replace(/\s+/g,"")},date:function(e,t){var n=t||new Date,r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in r)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return e},getDateStr:function(e){var t=new Date;return t.setDate(t.getDate()+e),t.getFullYear()+"."+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"."+(t.getDate()<10?"0"+t.getDate():t.getDate())}}},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=weex.requireModule("channel");t.default={add:function(e,t){return r.addEventListener(e,t)},remove:function(e){return r.removeEventListener(e)},post:function(e,t){return r.postMessage(e,t)}}},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(58),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return o.default.SOURCE+e}},62:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"http://newjfb.oss-cn-hangzhou.aliyuncs.com/production/static/images/0.0.1/"+e}},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),u=weex.requireModule("loadResurceModule");t.default={page:function(e){if(o.default.isString(e))return a(e).handle();if(o.default.isArray(e)){var t=[];return e.forEach(function(e){return t.push(a(e))}),Promise.all(t).handle()}},source:function(e){return new Promise(function(t,n){u.getUrlPath(e,function(e){"0000"===e.code?t(e.data):n(e)})}).handle()}};var a=function(e){return new Promise(function(t,n){var r=e.substr(e.lastIndexOf("/")+1).split(".")[0];u.getRoutePath(r,function(e){"0000"===e.code?t(e.data):n(e)})})}},8:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),u=r(o),a=n(0),i=r(a),c=weex.requireModule("modal"),f=new u.default(2e3);t.default={toast:function(e){return f.do(e.message)?i.default.isEmpty(e.message)?null:(e.duration=e.duration||2,void c.toast(e)):null},alert:function(e,t){c.alert(e,t)},confirm:function(e,t){c.confirm(e,t)},prompt:function(e,t){c.prompt(e,t)}}},87:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(37),u=r(o),a=n(0),i=r(a),c=n(12),f=r(c);t.default={get:function(){return f.default.get("USERS_HISTORY")},set:function(e){return f.default.get("USERS_HISTORY").then(function(e){return Promise.resolve(e)}).catch(function(){return Promise.resolve([])}).then(function(t){var n=i.default.isArray(t)?t:[];return n.forEach(function(t,r){i.default.isObject(t)&&u.default.isPhone(t.mobileNo)?t.mobileNo===e.mobileNo&&n.splice(r,1):n.splice(r,1)}),n.unshift(e),f.default.set("USERS_HISTORY",n)})}}},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default}});